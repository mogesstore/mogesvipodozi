<!DOCTYPE html>
<html lang="sw">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Moges Store â€” Offers</title>
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <style>
    /* STYLE ZAKO ZOTE NIMEZIACHA KAMA ZILIVYO */
    * {margin:0; padding:0; box-sizing:border-box;}
    body {
      font-family:'Poppins', sans-serif;
      background: linear-gradient(135deg, #f0fdf4, #dcfce7);
      color:#333;
      min-height:100vh;
    }
    header {
      background: linear-gradient(90deg, #1b5e20, #2e7d32);
      color:white; display:flex; justify-content:space-between; align-items:center;
      padding:12px 20px; position:sticky; top:0; z-index: 1000; border-bottom: 3px solid #bfa14a;
    }
    .logo { display:flex; align-items:center; gap:10px; }
    .logo img { height:55px; width:55px; border-radius:50%; border: 2px solid #bfa14a; }
    .logo h1 { font-size:1.3rem; color:white; font-weight:700; }
    .logo span { color: #bfa14a; }
    nav { display:flex; gap:15px; }
    nav a { color: white; text-decoration: none; font-weight: 600; font-size: 0.9rem; }
    .menu-toggle { display:none; flex-direction:column; cursor:pointer; }
    .menu-toggle span { background:white; height:3px; width:25px; margin:4px 0; border-radius:3px; }

    .offers-container { padding:60px 20px; max-width:1200px; margin:auto; text-align:center; }
    h1.page-title { font-size:2.2rem; margin-bottom:30px; color:#1b5e20; font-weight: 700; }
    .offer-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:25px; }
    .offer-card { background:white; border-radius:15px; overflow:hidden; box-shadow:0 4px 15px rgba(0,0,0,0.1); transition: transform .3s; border: 1px solid #eee; position: relative; }
    .offer-card:hover { transform:translateY(-8px); }
    .offer-card img { width:100%; height:230px; object-fit:cover; }
    
    .offer-badge { position: absolute; top: 10px; left: 10px; background: #e91e63; color: white; padding: 5px 12px; border-radius: 20px; font-weight: bold; font-size: 0.8rem; }

    .offer-info { padding:20px; }
    .offer-info h3 { color:#2e7d32; margin-bottom:10px; font-size: 1.2rem; }
    .offer-price { font-weight: 700; color: #e91e63; font-size: 1.2rem; margin-bottom: 15px; }
    
    .buy-btn { display: inline-block; background: #25D366; color: white; text-decoration: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; transition: 0.3s; }
    .buy-btn:hover { background: #128C7E; transform: scale(1.05); }

    footer { background: linear-gradient(90deg, #1b5e20, #2e7d32); padding: 45px 20px; margin-top: 60px; border-top: 3px solid #bfa14a; color: white; text-align: center; }
    .social-grid { display: flex; justify-content: center; flex-wrap: wrap; gap: 25px; margin-bottom: 25px; }
    .social-grid a { font-size: 2.2rem; text-decoration: none; color: white; }
    .copy-text { font-size: 0.85rem; font-weight: 600; color: #bfa14a; }

    #loader { font-size: 1.2rem; color: #2e7d32; font-weight: bold; }

    @media (max-width:768px) {
      nav { display:none; flex-direction:column; background:#1b5e20; position:absolute; top:75px; right:20px; padding:20px; border-radius:10px; }
      nav.active { display:flex; }
      .menu-toggle { display:flex; }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <img src="logo.png.png" alt="logo">
      <h1>Moges <span>Store</span></h1>
    </div>
    <div class="menu-toggle" id="menu-toggle"><span></span><span></span><span></span></div>
    <nav id="nav">
      <a href="index.html">Nyumbani</a>
      <a href="goods.html">Bidhaa</a>
      <a href="about.html">Kuhusu</a>
      <a href="contact.html">Wasiliana</a>
    </nav>
  </header>

  <section class="offers-container">
    <h1 class="page-title">Special Offers</h1>
    <div id="loader">Inapakia ofa mpya kutoka dukani...</div>
    <div id="offersList" class="offer-grid"></div>
  </section>

  <footer>
    <div style="margin-bottom: 20px; font-weight: bold; letter-spacing: 1px;">TUFUATILIE MITANDAONI</div>
    <div class="social-grid">
      <a href="https://facebook.com/jina_lako" target="_blank"><i class="fab fa-facebook"></i></a>
      <a href="https://instagram.com/jina_lako" target="_blank"><i class="fab fa-instagram"></i></a>
      <a href="https://wa.me/255756019062" target="_blank"><i class="fab fa-whatsapp"></i></a>
    </div>
    <p class="copy-text">&copy; 2026 MOGES STORE | Chaguo Namba Moja</p>
  </footer>

  <script>
    const menuToggle = document.getElementById('menu-toggle');
    const nav = document.getElementById('nav');
    menuToggle.addEventListener('click', () => { nav.classList.toggle('active'); });

    // BIN ID MPYA IMESHAWEKWA HAPA
    const BIN_ID = "6589e8a2071eb5a19971";
    const container = document.getElementById('offersList');
    const loader = document.getElementById('loader');

    async function loadOffers() {
      try {
        // Tumeongeza timestamp ?t= ili kuzuia browser isionyeshe ofa za zamani
        const response = await fetch(`https://api.npoint.io/${BIN_ID}?t=${new Date().getTime()}`);
        const allData = await response.json();
        
        // Tunachuja bidhaa zenye aina (type) ya 'offer' pekee
        const offers = Array.isArray(allData) ? allData.filter(item => item.type === 'offer') : [];

        loader.style.display = 'none';

        if (offers.length === 0) {
          container.innerHTML = "<p style='grid-column: 1/-1;'>Kwa sasa hakuna ofa maalum. Angalia bidhaa nyingine kwenye ukurasa wa Bidhaa.</p>";
          return;
        }

        container.innerHTML = offers.reverse().map(offer => `
          <div class="offer-card">
            <div class="offer-badge">OFA MAALUM</div>
            <img src="${offer.image}" alt="${offer.name}" onerror="this.src='https://via.placeholder.com/300?text=Picha+ya+Ofa'">
            <div class="offer-info">
              <h3>${offer.name}</h3>
              <p class="offer-price">Tsh ${Number(offer.price).toLocaleString()}</p>
              <a href="https://wa.me/255756019062?text=Habari%20Moges%20Store,%20nahitaji%20ofa%20ya:%20${encodeURIComponent(offer.name)}" class="buy-btn">
                <i class="fab fa-whatsapp"></i> AGIZA SASA
              </a>
            </div>
          </div>
        `).join('');

      } catch (error) {
        console.error("Error fetching offers:", error);
        loader.innerText = "Imeshindwa kupakia ofa.";
      }
    }

    loadOffers();
  </script>
</body>
</html>
